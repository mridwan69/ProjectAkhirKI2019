
    <!DOCTYPE html>
    <html lang="en">
    
    <head>
        <title>STEGANOGRAPHY DCT</title>
    
          <meta charset="utf-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
          <meta http-equiv="X-UA-Compatible" content="IE=edge" />
          <meta name="description" content="Gradient Able Bootstrap admin template made using Bootstrap 4. The starter version of Gradient Able is completely free for personal project." />
          <meta name="keywords" content="free dashboard template, free admin, free bootstrap template, bootstrap admin template, admin theme, admin dashboard, dashboard template, admin template, responsive" />
          <meta name="author" content="codedthemes">
    
          
          <!-- Google font--><link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600" rel="stylesheet">
          <!-- Required Fremwork -->
          <link rel="stylesheet" type="text/css" href="assets/css/bootstrap/css/bootstrap.min.css">
          <!-- themify-icons line icon -->
          <link rel="stylesheet" type="text/css" href="assets/icon/themify-icons/themify-icons.css">
        <link rel="stylesheet" type="text/css" href="assets/icon/font-awesome/css/font-awesome.min.css">
          <!-- ico font -->
          <link rel="stylesheet" type="text/css" href="assets/icon/icofont/css/icofont.css">
          <!-- Style.css -->
          <link rel="stylesheet" type="text/css" href="assets/css/style.css">
          <link rel="stylesheet" type="text/css" href="assets/css/jquery.mCustomScrollbar.css">
      </head>
    
      <!--<body class="fix-menu dark-layout">-->
    
      <body>
    
            <!-- Pre-loader start -->
        <div class="theme-loader">
            <div class="loader-track">
                <div class="loader-bar"></div>
            </div>
        </div>
        <!-- Pre-loader end -->
    
        <div id="pcoded" class="pcoded">
            <div class="pcoded-overlay-box"></div>
            <div class="pcoded-container navbar-wrapper">
    
                <nav class="navbar header-navbar pcoded-header">
                   <div class="navbar-wrapper">
                       <div class="navbar-logo">
                           <a class="mobile-menu" id="mobile-collapse" href="#!">
                               <i class="ti-menu"></i>
                           </a>
                           <div class="mobile-search">
                               <div class="header-search">
                                   <div class="main-search morphsearch-search">
                                       <div class="input-group">
                                           <span class="input-group-addon search-close"><i class="ti-close"></i></span>
                                           <input type="text" class="form-control" placeholder="Enter Keyword">
                                           <span class="input-group-addon search-btn"><i class="ti-search"></i></span>
                                       </div>
                                   </div>
                               </div>
                           </div>
                           <a href="index.html">
                               <h4>STEGANO DCT</h4>
                           </a>
                           <a class="mobile-options">
                               <i class="ti-more"></i>
                           </a>
                       </div>
    
                       <div class="navbar-container container-fluid">
                           <ul class="nav-left">
                               <li>
                                   <div class="sidebar_toggle"><a href="javascript:void(0)"><i class="ti-menu"></i></a></div>
                               </li>
                               <li class="header-search">
                                   <div class="main-search morphsearch-search">
                                       <div class="input-group">
                                           <span class="input-group-addon search-close"><i class="ti-close"></i></span>
                                           <input type="text" class="form-control">
                                           <span class="input-group-addon search-btn"><i class="ti-search"></i></span>
                                       </div>
                                   </div>
                               </li>
                               <li>
                                   <a href="#!" onclick="javascript:toggleFullScreen()">
                                       <i class="ti-fullscreen"></i>
                                   </a>
                               </li>
                           </ul>
    
                       </div>
                   </div>
               </nav>
    
                <div class="pcoded-main-container">
                    <div class="pcoded-wrapper">
                        <nav class="pcoded-navbar">
                            <div class="sidebar_toggle"><a href="#"><i class="icon-close icons"></i></a></div>
                            <div class="pcoded-inner-navbar main-menu">
                               
                                <div class="pcoded-navigatio-lavel" data-i18n="nav.category.navigation">Layout</div>
                                <ul class="pcoded-item pcoded-left-item">
                                    <li class="">
                                        <a href="index.html">
                                            <span class="pcoded-micon"><i class="ti-control-forward"></i><b>D</b></span>
                                            <span class="pcoded-mtext" data-i18n="nav.dash.main">Encode</span>
                                            <span class="pcoded-mcaret"></span>
                                        </a>
                                    </li>
                                </ul>
                                <ul class="pcoded-item pcoded-left-item">
                                    <li class="">
                                        <a href="index2.html">
                                            <span class="pcoded-micon"><i class="ti-control-backward"></i><b>D</b></span>
                                            <span class="pcoded-mtext" data-i18n="nav.dash.main">Decode</span>
                                            <span class="pcoded-mcaret"></span>
                                        </a>
                                    </li>
                                </ul>
                                <ul class="pcoded-item pcoded-left-item">
                                    <li class="active">
                                        <a href="index3.html">
                                            <span class="pcoded-micon"><i class="ti-check"></i><b>D</b></span>
                                            <span class="pcoded-mtext" data-i18n="nav.dash.main">Pengujian</span>
                                            <span class="pcoded-mcaret"></span>
                                        </a>
                                    </li>
                                </ul>
                        </nav>
                        <div class="pcoded-content">
                            <div class="pcoded-inner-content">
                                <!-- Main-body start -->
                                <div class="main-body">
                                    <div class="page-wrapper">
                    <!-- Page-header start -->
                                        <div class="page-header card col-8 mx-auto">
                                            <div class="card-block">                      
                                                <div class="card-body">
                                                  <h5 class="m-b-10">Pengujian PSNR</h5>
                                                  <div class="row">
                                                      <div class="col-6">
                                                        <div class="form-group">
                                                          <label for="gambar">Masukan Gambar Original</label>
                                                          <input type="file" id="objFile" accept="image/*" class="form-control-file" id="" onchange="uploadFile()">
                                                        </div>
                                                      </div>
                                                      <div class="col-6">
                                                        <div class="form-group">
                                                          <label for="gambar">Masukan Gambar Steganografi</label>
                                                          <input type="file" id="file1" accept="image/*" class="form-control-file" id="" onchange="stegoFile()">
                                                        </div>
                                                      </div>
                                                  </div>                                     
                                                    <button class="btn btn-primary col-12" onclick='getPSNR()'>Submit</button><br><br>
                                                    
                                                    <pre id="result" class="alert alert-primary"></pre>
                                              
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div id="styleSelector">
    
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    
    
    <!-- Warning Section Ends -->
    <script src="jquery.min.js"></script>
    <script src="cryptostego.min.js"></script>
    <script src="bigInteger.js"></script>

    <script>
    var byteCover = null;
    var byteStego = null;
    var coverWidth = null;
    var coverHeight = null;
    var coverHeight = null;
    var stegoWidth = null;
    var stegoHeight = null;
    var stegoSize = null;

        function uploadFile() {
        var input = document.getElementById('objFile');
        // var file = $("#objFile")[0].files[0];
        var file = input.files[0];
        fr = new FileReader();
        // fr.onload = receivedText;
        //fr.readAsText(file);
        fr.onload = (function(theFile){
            return function(e){
                byteCover = receivedText();
                console.log(byteCover);
                var img = new Image;
                img.src = fr.result;
                img.onload = function(){
                    coverSize = file.size;
                    coverWidth = img.width;
                    coverHeight = img.height;
                    console.log('Cover Image : '+coverWidth + 'x' + coverHeight);
                };
            };
        }) (file);
        fr.readAsDataURL(file);
    }

    function stegoFile() {
        var input = document.getElementById('file1');
        // var file = $("#objFile")[0].files[0];
        var file = input.files[0];
        fr = new FileReader();
        // fr.onload = receivedText;
        //fr.readAsText(file);
        fr.onload = (function(theFile){
            return function(e){
                byteStego = receivedText();
                console.log(byteStego);
                var img = new Image;
                img.src = fr.result;
                img.onload = function(){
                    stegoSize = file.size;
                    stegoWidth = img.width;
                    stegoHeight = img.height;
                    console.log('Cover Image : '+stegoWidth + 'x' +stegoHeight);
                };
            };
        }) (file);
        fr.readAsDataURL(file);
    }

    function log10(value){
        return Math.log(value) / Math.LN10;
    }
    var sumByte=0;
    function getPSNR(){
        var coverLength = byteCover.length;

        // if ((coverHeight*coverWidth) == (stegoHeight*stegoWidth)){
            var i = 0;

            while (i <= coverLength){
                sumByte = bigInt(sumByte+Math.pow((bigInt(byteCover[i])-bigInt(byteStego[i])),2));
                i+=1;
            }
            var MSE = bigInt(sumByte)/(coverHeight*coverWidth);
            var PSNR = 10*log10(255*255/MSE);

            console.log(MSE);
            console.log(PSNR);

            document.getElementById('result').textContent=
            'MSE:'+MSE+'\n'+
            'PSNR:'+PSNR+'\n';
        }
    // }

    function receivedText() {
        var b64Data = fr.result.split(',');
        var contentType = 'image/jpeg';
        //document.getElementById('editor').appendChild(document.createTextNode(fr.result))
        var byteCharacters = atob(b64Data[1]);
        var byteNumbers = Array.prototype.map.call(byteCharacters,
                                       charCodeFromCharacter);
        var uint8Data = new Uint8Array(byteNumbers);
        return b64toBlob(b64Data[1], contentType);
        //var blobUrl = URL.createObjectURL(blob);
    }

    function charCodeFromCharacter(c) {
         return c.charCodeAt(0);
    }

    function b64toBlob(b64Data, contentType, sliceSize) {
        contentType = contentType || '';
        sliceSize = sliceSize || 1024;
       var byteCharacters = atob(b64Data);
        var byteArrays = [];

        for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {
            var slice = byteCharacters.slice(offset, offset + sliceSize);
            var byteNumbers = Array.prototype.map.call(slice, charCodeFromCharacter);
            var byteArray = new Uint8Array(byteNumbers);
            byteArrays.push(byteArray);
        }
        // console.log(byteArray);
        return byteArray;

    }
    </script>
    <!-- Required Jquery -->
    <script type="text/javascript" src="assets/js/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="assets/js/jquery-ui/jquery-ui.min.js"></script>
    <script type="text/javascript" src="assets/js/popper.js/popper.min.js"></script>
    <script type="text/javascript" src="assets/js/bootstrap/js/bootstrap.min.js"></script>
    <!-- jquery slimscroll js -->
    <script type="text/javascript" src="assets/js/jquery-slimscroll/jquery.slimscroll.js"></script>
    <!-- modernizr js -->
    <script type="text/javascript" src="assets/js/modernizr/modernizr.js"></script>
    <script type="text/javascript" src="assets/js/modernizr/css-scrollbars.js"></script>
    
    <!-- Custom js -->
    <script type="text/javascript" src="assets/js/script.js"></script>
    <script src="assets/js/pcoded.min.js"></script>
    <script src="assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="assets/js/vartical-demo.js"></script>
    </body>
    
    </html>
    
    
    